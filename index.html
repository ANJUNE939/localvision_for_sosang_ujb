<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LocalVision 7:3 Player (Single Layout)</title>
  <style>
    html, body { margin:0; padding:0; width:100%; height:100%; background:#000; overflow:hidden; }
    .wrap { width:100vw; height:100vh; display:flex; }
    .zone { position:relative; height:100vh; background:#000; overflow:hidden; }
    .left { width:70vw; }
    .right { width:30vw; border-left: 3px solid rgba(255,255,255,0.12); }

    video, img {
      width:100%; height:100%;
      object-fit:cover;
      position:absolute; inset:0;
      background:#000;
    }

    .placeholder {
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      color:rgba(255,255,255,0.85);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      font-size:18px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.06), rgba(0,0,0,0.9));
      z-index:5;
      text-align:center;
      padding:24px;
    }

    /* ìƒë‹¨ ë±ƒì§€: ê¸°ë³¸ ìˆ¨ê¹€ â†’ ìƒë‹¨(56px)ì— ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ í‘œì‹œ */
    .badgeWrap{
      position:absolute; top:0; left:0; right:0;
      height:56px;
      z-index:12;
      background:transparent;
      cursor:default;
      -webkit-tap-highlight-color: transparent;
    }
    .badgeWrap:focus{ outline:none; }
    .badge {
      position:absolute; top:10px; left:10px;
      padding:6px 10px; border-radius:999px;
      background:rgba(0,0,0,0.45);
      color:rgba(255,255,255,0.75);
      font-size:12px;
      user-select:none;

      /* hidden by default */
      opacity:0;
      transform: translateY(-4px);
      transition: opacity 140ms ease, transform 140ms ease;
      pointer-events:none;
    }
    .badgeWrap:hover .badge,
    .badgeWrap:active .badge {
      opacity:1;
      transform: translateY(0);
    }

    .overlay {
      position:absolute; bottom:16px; right:16px;
      background: rgba(0,0,0,0.55);
      color:#fff;
      padding:10px 14px;
      border-radius:12px;
      font-size:16px;
      cursor:pointer;
      z-index:10;
      user-select:none;
      display:none;
    }

    /* ì§„ë‹¨ íŒ¨ë„ */
    .diag {
      position:fixed; top:0; right:0;
      width:min(420px, 90vw); height:100vh;
      background:rgba(0,0,0,0.88);
      border-left:1px solid rgba(255,255,255,0.15);
      transform: translateX(100%);
      transition: transform 180ms ease;
      z-index: 1250;
      color:#fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      padding:16px;
      box-sizing:border-box;
    }
    .diag.open { transform: translateX(0); }
    .diag h3 { margin:0 0 12px 0; font-size:16px; }
    .row { display:flex; justify-content:space-between; gap:12px; padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.08); }
    .k { color:rgba(255,255,255,0.65); font-size:13px; }
    .v { color:rgba(255,255,255,0.95); font-size:13px; text-align:right; word-break:break-all; }
    .hint {
      position:fixed; bottom:10px; left:10px;
      color:rgba(255,255,255,0.35); font-size:12px;
      z-index:998;
    }

    /* ìˆ¨ê¹€ í´ë¦­ ì˜ì—­(ì¢Œìƒë‹¨) */
    /* ===== Fully Kiosk/í‚¤ì˜¤ìŠ¤í¬ ëª¨ë“œ: ìƒë‹¨ UI ì™„ì „ ìˆ¨ê¹€ =====
       - ëª©ì : Fully Kioskì—ì„œëŠ” hover/focusê°€ í•­ìƒ ê±¸ë ¤ 'ìš°ë¦¬ì—…ì²´70/ì§€ì—­ì†Œì‹30' ë±ƒì§€ì™€ ì „ì²´í™”ë©´ ë²„íŠ¼ì´ ê³„ì† ë³´ì´ëŠ” í˜„ìƒ ì œê±°
       - ë™ì‘: (1) UAê°€ FullyKioskë¡œ ë³´ì´ê±°ë‚˜ (2) URLì— kiosk=1 ì´ë©´ ìˆ¨ê¹€
    */
    html.kiosk .badgeWrap,
    html.kiosk .hint,
    html.kiosk .netDock{
      display:none !important;
    }


    .diagbtn{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.08);
      color:rgba(255,255,255,0.95);
      font-size:14px;
      cursor:pointer;
    }
    .diagbtn:active{ transform: scale(0.98); }
    .vBtns{ display:flex; gap:8px; justify-content:flex-end; align-items:center; }

.hotspot {
      position:fixed; top:0; left:0;
      width:60px; height:60px;
      z-index:998;
      background:transparent;
    }
  
    /* ===== Sleep Mode UI (owner) ===== */
    .sleep-hotspot{
      position:fixed; right:0; bottom:0;
      width:120px; height:120px;
      z-index:999;
      background:transparent;
      touch-action:manipulation;
      display:none;
      pointer-events:none;
    }
    .sleep-shield{
      position:fixed; inset:0;
      z-index:1200;
      display:none;
      background:#000;
      pointer-events:auto; /* block touches while sleeping */
    }
    .sleep-shield.on{ display:block; }
    .sleep-saver{
      position:absolute; inset:0;
      display:none;
      overflow:hidden;
    }
    .sleep-shield.saver .sleep-saver{ display:block; }
    .sleep-saver::before{
      content:"";
      position:absolute;
      width:24px; height:24px;
      border-radius:999px;
      background:rgba(255,255,255,0.16);
      left:10%; top:10%;
      animation:saverMove 12s linear infinite;
    }
    @keyframes saverMove{
      0%{ transform:translate(0,0); }
      25%{ transform:translate(70vw,10vh); }
      50%{ transform:translate(55vw,70vh); }
      75%{ transform:translate(10vw,55vh); }
      100%{ transform:translate(0,0); }
    }
    .sleep-panel{
      position:fixed;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      width:min(720px, 92vw);
      z-index:1300;
      background:rgba(18,18,18,0.92);
      border:1px solid rgba(255,255,255,0.10);
      border-radius:18px;
      box-shadow:0 18px 60px rgba(0,0,0,0.55);
      color:#fff;
      display:none;
      font-family: system-ui, -apple-system, "Nanum Gothic", "Pretendard", sans-serif;
    }
    .sleep-panel.open{ display:block; }
    .sp-head{
      display:flex; align-items:center; justify-content:space-between;
      padding:16px 18px;
      border-bottom:1px solid rgba(255,255,255,0.08);
    }
    .sp-title{ font-size:18px; font-weight:700; letter-spacing:-0.2px; }
    .sp-close{
      background:rgba(255,255,255,0.10);
      border:1px solid rgba(255,255,255,0.12);
      color:#fff;
      border-radius:12px;
      padding:10px 12px;
      font-size:14px;
    }
    .sp-body{ padding:16px 18px 18px; }
    .sp-row{
      display:flex; align-items:center; gap:10px;
      margin:10px 0;
      flex-wrap:wrap;
    }
    .sp-label{
      width:64px;
      color:rgba(255,255,255,0.70);
      font-size:13px;
    }
    .sp-val{
      min-width:92px;
      padding:10px 12px;
      border-radius:12px;
      background:rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.10);
      font-size:18px;
      font-weight:800;
      letter-spacing:0.5px;
      text-align:center;
    }
    .sp-btn{
      background:rgba(255,255,255,0.10);
      border:1px solid rgba(255,255,255,0.12);
      color:#fff;
      border-radius:12px;
      padding:10px 12px;
      font-size:14px;
      min-width:92px;
    }
    .sp-btn.on{
      outline:2px solid rgba(255,255,255,0.35);
      background:rgba(255,255,255,0.18);
    }
    .sp-adjust .sp-btn{ min-width:110px; }
    .sp-foot{
      justify-content:flex-end;
      margin-top:14px;
    }
    .sp-hint{
      margin-top:10px;
      font-size:12px;
      color:rgba(255,255,255,0.55);
      line-height:1.35;
    }
    .sp-btn:focus, .sp-close:focus{
      outline:2px solid rgba(255,255,255,0.45);
      outline-offset:2px;
    }
    
  
    /* network badge (hover to reveal) */
    .netDock{
      position:fixed;
      right:10px;
      bottom:8px;
      width:110px;
      height:18px;
      z-index:99998;
      pointer-events:auto;
      background:transparent;
    }
    .netBadge{
      position:absolute;
      right:0;
      bottom:0;
      padding:2px 8px;
      border-radius:999px;
      font-size:11px;
      letter-spacing:0.2px;
      color:#fff;
      background:rgba(0,0,0,0.45);
      border:1px solid rgba(255,255,255,0.18);
      opacity:0;
      transform:translateY(4px);
      transition:opacity .15s ease, transform .15s ease;
      user-select:none;
      pointer-events:none;
      white-space:nowrap;
    }
    .netDock:hover .netBadge,
    .netDock:focus-within .netBadge{
      opacity:1;
      transform:translateY(0);
    }

  </style>

  <script>
    // âœ… í‚¤ì˜¤ìŠ¤í¬(UI ìˆ¨ê¹€) ëª¨ë“œ ê°ì§€
    // - Fully Kiosk Browserì—ì„œëŠ” í¬ì»¤ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì¡í˜€ ìƒë‹¨ ë±ƒì§€/ë²„íŠ¼ì´ ê³„ì† ë³´ì¼ ìˆ˜ ìˆì–´, UIë¥¼ ìˆ¨ê¹ë‹ˆë‹¤.
    // - ì¡°ê±´: (1) URL ?kiosk=1 ë˜ëŠ” ?ui=min|0 (2) UAì— Fully í¬í•¨ (3) window.fully ì¸í„°í˜ì´ìŠ¤ ê°ì§€
    (function(){
      try{
        const root = document.documentElement;
        const params = new URLSearchParams(location.search);
        const kioskParam = (params.get("kiosk") || "").toLowerCase();
        const uiParam = (params.get("ui") || "").toLowerCase();

        const kioskOn = ["1","true","on","yes"].includes(kioskParam)
          || ["0","off","hide","min","minimal","kiosk"].includes(uiParam);

        const ua = navigator.userAgent || "";
        const uaFully = /FullyKiosk|Fully Kiosk|FullyKioskBrowser/i.test(ua) || /Fully/i.test(ua);

        const apply = () => {
          const hasFully = !!window.fully;
          if (kioskOn || uaFully || hasFully) root.classList.add("kiosk");
        };

        apply();

        // Fully JS Interfaceê°€ ë’¤ëŠ¦ê²Œ ë¶™ëŠ” ê²½ìš° ëŒ€ë¹„(ìµœëŒ€ 5ì´ˆ)
        let tries = 0;
        const t = setInterval(() => {
          tries++;
          if (window.fully) {
            root.classList.add("kiosk");
            clearInterval(t);
          }
          if (tries > 20) clearInterval(t);
        }, 250);
      }catch(e){}
    })();
  </script>

</head>
<body>
  <div class="wrap">
    <!-- LEFT -->
    <section class="zone left">
      <div class="badgeWrap"><div class="badge">ìš°ë¦¬ì—…ì²´ 70%</div></div>
      <div class="placeholder" id="phLeft">ë¡œë”© ì¤‘â€¦</div>
      <img id="imgLeft" alt="" style="display:none;" />
      <video id="vidLeft" autoplay muted playsinline style="display:none;"></video>
      <div class="overlay" id="olLeft">ğŸ”— ìì„¸íˆ ë³´ê¸°</div>
    </section>

    <!-- RIGHT -->
    <section class="zone right">
      <div class="badgeWrap"><div class="badge">ì§€ì—­ì†Œì‹ 30%</div></div>
      <div class="placeholder" id="phRight">ë¡œë”© ì¤‘â€¦</div>
      <img id="imgRight" alt="" style="display:none;" />
      <video id="vidRight" autoplay muted playsinline style="display:none;"></video>
      <div class="overlay" id="olRight">ğŸ”— ìì„¸íˆ ë³´ê¸°</div>
    </section>
  </div>

  <!-- ì§„ë‹¨ íŒ¨ë„ -->
  <div class="hotspot" id="hotspot" tabindex="0" aria-label="ì§„ë‹¨íŒ¨ë„ ì—´ê¸°"></div>
    <div class="netDock" id="netDock" aria-hidden="true"><div class="netBadge" id="netBadge">ONLINE</div></div>
  

  <div class="diag" id="diag">
    <h3>ì§„ë‹¨ íŒ¨ë„</h3>
    <div class="row"><div class="k">ì˜¨ë¼ì¸</div><div class="v" id="dOnline">-</div></div>
    <div class="row"><div class="k">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</div><div class="v" id="dUpdate">-</div></div>
    <div class="row"><div class="k">ë¹Œë“œ</div><div class="v" id="dBuild">-</div></div>
    <div class="row"><div class="k">LEFT ì¬ìƒ</div><div class="v" id="dLeft">-</div></div>
    <div class="row"><div class="k">RIGHT ì¬ìƒ</div><div class="v" id="dRight">-</div></div>
    <div class="row"><div class="k">ìºì‹œ ìƒíƒœ</div><div class="v" id="dCache">-</div></div>
    <div class="row"><div class="k">ì—ëŸ¬ íšŸìˆ˜</div><div class="v" id="dErr">0</div></div>
    <div class="row"><div class="k">ì·¨ì¹¨ ìƒíƒœ</div><div class="v" id="dSleep">-</div></div>
    <div class="row"><div class="k">ì·¨ì¹¨ ì œì–´</div><div class="v vBtns">
      <button class="diagbtn" id="btnSleepOpen" type="button">ì„¤ì •</button>
      <button class="diagbtn" id="btnSleepToggle" type="button">ì¦‰ì‹œON</button>
    </div></div>
    <div class="row"><div class="k">ìƒˆë¡œê³ ì¹¨</div><div class="v vBtns">
      <button class="diagbtn" id="btnReload" type="button">ìƒˆë¡œê³ ì¹¨</button>
    </div></div>
  </div>
  <div class="hint">ì¢Œìƒë‹¨ 5ë²ˆ í„°ì¹˜(ë˜ëŠ” ë¦¬ëª¨ì»¨ OK 7ë²ˆ) â†’ ì§„ë‹¨ íŒ¨ë„ Â· ìš°ìƒë‹¨ â›¶ â†’ ì „ì²´í™”ë©´</div>

  
  <!-- ì·¨ì¹¨(ë¸”ë™/ìŠ¤í¬ë¦°ì„¸ì´ë²„) ì„¤ì • ì§„ì…: ìš°í•˜ë‹¨ í•«ìŠ¤íŒŸ -->
  <div class="sleep-hotspot" id="sleepHotspot" aria-hidden="true"></div>

  <!-- ì·¨ì¹¨ ì˜¤ë²„ë ˆì´ -->
  <div class="sleep-shield" id="sleepShield" aria-hidden="true">
    <div class="sleep-saver" id="sleepSaver" aria-hidden="true"></div>
  </div>

  <!-- ì·¨ì¹¨ ì„¤ì • íŒ¨ë„ -->
  <div class="sleep-panel" id="sleepPanel" aria-hidden="true">
    <div class="sp-head">
      <div class="sp-title">ì·¨ì¹¨ëª¨ë“œ ì„¤ì •</div>
      <button class="sp-close" id="sleepClose" type="button">ë‹«ê¸°</button>
    </div>
    <div class="sp-body">
      <div class="sp-row">
        <div class="sp-label">ì„ íƒ</div>
        <button class="sp-btn" id="sleepSelectStart" type="button">ì‹œì‘</button>
        <button class="sp-btn" id="sleepSelectEnd" type="button">ì¢…ë£Œ</button>
      </div>

      <div class="sp-row">
        <div class="sp-label">ì‹œì‘</div>
        <div class="sp-val" id="sleepStartVal">00:00</div>
        <div class="sp-label">ì¢…ë£Œ</div>
        <div class="sp-val" id="sleepEndVal">09:30</div>
      </div>

      <div class="sp-row">
        <div class="sp-label">í”„ë¦¬ì…‹</div>
        <button class="sp-btn" id="sleepPresetDefault" type="button">ê¸°ë³¸</button>
        <button class="sp-btn" id="sleepPresetNight" type="button">ì•¼ê°„</button>
        <button class="sp-btn" id="sleepPresetOff" type="button">24ì‹œê°„(OFF)</button>
      </div>


      <div class="sp-row sp-adjust">
        <button class="sp-btn" id="sleepMinusHour" type="button">-1ì‹œê°„</button>
        <button class="sp-btn" id="sleepMinus10" type="button">-10ë¶„</button>
        <button class="sp-btn" id="sleepPlus10" type="button">+10ë¶„</button>
        <button class="sp-btn" id="sleepPlusHour" type="button">+1ì‹œê°„</button>
      </div>

      <div class="sp-row">
        <div class="sp-label">í™”ë©´</div>
        <button class="sp-btn" id="sleepModeBlack" type="button">ë¸”ë™</button>
        <button class="sp-btn" id="sleepModeSaver" type="button">ìŠ¤í¬ë¦°ì„¸ì´ë²„</button>
      </div>

      <div class="sp-row sp-foot">
        <button class="sp-btn" id="sleepReset" type="button">ê¸°ë³¸ê°’</button>
        <button class="sp-btn" id="sleepSave" type="button">ì €ì¥</button>
      </div>

      <div class="sp-hint">
        ì§„ì…: <b>ìš°í•˜ë‹¨ 1ì´ˆ ê¾¹ ëˆ„ë¥´ê¸°</b> (ì†ë‹˜ì´ ëª» ê±´ë“œë¦¬ê²Œ ìˆ¨ê¹€)<br/>
        ìš°ì„ ìˆœìœ„: URL íŒŒë¼ë¯¸í„° &gt; ì ì£¼ ì €ì¥ê°’ &gt; STORE_SLEEP(ì½”ë“œ) &gt; ê¸°ë³¸ê°’(00:00~09:30)
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
